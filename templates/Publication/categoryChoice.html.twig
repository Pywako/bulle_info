{% extends 'base.html.twig' %}
{% block title %} Publication - 2 - Classement {% endblock %}

{% block h1 %}Publication{% endblock %}

{% block breadcrumbs %}
    <nav aria-label="breadcrumb">
        <ol class="breadcrumb">
            <li class="breadcrumb-item"><a href="{{ path('homepage') }}">Accueil</a></li>
            <li class="breadcrumb-item"><a href="{{ path('publication_step1') }}">Etape 1</a></li>
            <li class="breadcrumb-item active" aria-current="page">Etape 2</li>
        </ol>
    </nav>
{% endblock %}
{% block main %}

    <h4>
        Classons notre ressource pour la retrouver facilement
    </h4>
    {{ form_start(form) }}
    {{ form_row(form.title_category) }}
    <p>
        Puis choisissez un sujet ou créez en un nouveau.
    </p>

    {{ form_row(form.title_subject_text) }}

    <button type="submit" class="btn btn-success">Publier</button>
    {{ form_end(form) }}

    <p>
        Vous ne trouvez pas votre bonheur?<br>
        Cliquer <a href="#">ici</a> pour soumettre de nouvelles catégories
    </p>
{% endblock %}
{% block javascripts %}
    <script>
        var $category = $('#category_subject_title_category');
        $category.change(function() {
            var $form = $(this).closest('form');
            var data = {};
            data[$category.attr('name')] = $category.val();
            $.ajax({
                url : $form.attr('action'),
                type: $form.attr('method'),
                data: data,
                success: function(html) {
                    $('category_subject_title_subject').replaceWith(
                        $(html).find('category_subject_title_subject')
                    );
                }
            });
        });
    </script>

{% endblock %}